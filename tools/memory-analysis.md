## 工具

### 根据指标找工具
|内存指标|性能工具|
|----|----|
|系统已用、可用、剩余内存|free, vmstat, sar, /proc/meminfo|
|进程虚拟内存、常驻内存、共享内存|ps, top|
|进程内存分布|pmap|
|进程Swap换出内存|top, /proc/pid/status|
|进程缺页异常|ps, top|
|系统换页情况|sar|
|缓存/缓冲区用量|free, vmstat, sar, cachestat|
|缓存/缓冲区命中率|cachetop|
|SWAP已用空间和剩余空间|free, sar|
|SWAP换入换出|vmstat|
|内存泄露检测|memleak, valgrind|
|指定文件的缓存大小|pcstat|

### 根据工具查指标
|性能工具|内存性能指标|
|----|----|
|free, /proc/meminfo|系统已用、可用、剩余内存以及缓存和缓冲区的使用量|
|top, ps|进程虚拟、常驻、共享内存以及缺页异常|
|vmstat|系统剩余内存、缓存、缓冲区、换入、换出|
|sar|系统内存换页情况、内存使用率、缓存和缓冲区使用量以及Swap使用情况|
|cachestat|系统缓存和缓冲区的命中率|
|cachetop|进程缓存和缓冲区的命中率|
|slabtop|系统Slab缓存使用情况|
|/proc/pid/status|进程Swap内存等|
|/proc/pid/smaps, pmap|进程地址空间和内存状态|
|valgrind|进程内存错误检查器，用来检测内存初始化、泄露、越界访问等各种内存错误|
|memleak|内存泄露检测|
|pcstat|查看指定文件的缓存情况|

## 进程的内存指标
1. 虚拟内存：进程代码段、数据段、共享内存、已经申请的堆内存和已经换出的内存等，需要注意的是，已经申请的内存，即使还没有分配物理内存，也算作虚拟内存
2. 常驻内存：进程实际使用的物理内存，不包括Swap和共享内存
3. 共享内存：既包括与其他进程共同使用的真实的共享内存，还包括加载的动态链接库以及程序的代码段
4. Swap内存：通过Swap换出到磁盘的内存

